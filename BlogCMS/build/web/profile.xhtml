<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <title>Blog Template</title>
        <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"/>
        <link rel="stylesheet" href="../css/#{indexBean.cssFile}"/>
        <link rel="stylesheet" href="../css/general.css"/>
        <script src="../js/jquery-1.11.1.js" type="text/javascript"></script>
        <script src="../js/main.js" type="text/javascript"></script>
    </h:head>
    <h:body>
        <header>
        <div class="page-center">
            <h1 class="h-centered">CMS Blog</h1>
            <div class="header-body">
                <h:form style="width: 240px;">
                    <h:inputText value="#{profileBean.search}" class="user-search"/>
                    <h:commandButton style="float: left;" value="go" action="#{profileBean.performSearch()}" />

                </h:form>
                <span style="float: right;">
                    <a href="main.xhtml"><button id="profile-button-header">Home</button></a>
                    <button id="logout-button-header">Log out</button>
                </span>

                <div style="clear: both;"></div>
            </div>
        </div>
        </header>
        <div class="content">
            <div class="page-center">
                <a href="main.xhtml"><button id="profile-button-menu">Home</button></a>
                <button id="logout-button-menu">Log out</button>
                <h2>Profil von User 1</h2>
                <h:form>
                <h:outputText value="New Password" id="newPassword"></h:outputText>
                <h:inputText id="NewPassword"></h:inputText><br></br>
                <h:outputText value="Repeat Password" id="repeatPassword"></h:outputText>
                <h:inputText id="RepeatPassword"></h:inputText><br></br>
                <h:commandButton value="Save Changes" action="#{ChangePassword.change}"></h:commandButton>
                </h:form>
                <h:form>
                <h2>User Daten</h2>
                <h:outputText value="Username: #{profileBean.sessiondata.user.name}" id="username"/><br></br>
               
                <h:outputText value="Email: #{profileBean.sessiondata.user.email}" id="email"/><br></br>
                <h:outputText value="Gender #{profileBean.sessiondata.user.gender.genderName}" id="gender"/><br></br>
                </h:form>
                
                
                <h2><h:outputText rendered="#{profileBean.showSearchList}" value="Users"/></h2>
                <ul>
                
                <ui:repeat value="#{profileBean.searchedUsers}" rendered="#{profileBean.showSearchList}" var="users">
                    <li><h:outputText value="#{users.name}:#{users.email}"/></li>
                </ui:repeat>
                </ul>
                
                <div id="pinwall">
                    <ui:repeat value="#{profileBean.pinedPosts}" var="post">
                        <div class="pin">
                            <div class="pin-header">
                                <h:form>
                                    <h:commandLink action="#{profileBean.deletePinedPost()}">
                                        <span class="pin-action fa fa-times"></span>
                                        <f:setPropertyActionListener target="#{profileBean.currentSelectedPost}" value="#{post}"/>
                                    </h:commandLink>
                                </h:form>
                                <span class="pin-action fa fa-expand pin-expand">expand</span>
                                
                            </div>
                            <div class="pin-inner">
                                <h3><h:outputText value="#{post.title}"/></h3>
                                <p><h:outputText value="By: #{post.user.name}"/></p>
                                <span><h:outputText escape="false" value="#{post.summary}" class="pin-summary" /></span>
                                <span><h:outputText escape="false" value="#{post.content}" class="pin-content" /></span>
                            </div>
                        </div>
                    </ui:repeat>
                </div>
                <footer>
                    (c) 2015 
                </footer>
            </div>
        </div>
        <script type="text/javascript">
            $(document).ready(function (){
                $(".pin-content").css("display", "none");
            });
            
            $(".pin-expand").on("click", function(){
                if($(this).hasClass("fa-expand")){
                    $(this).removeClass("fa-expand");
                    $(this).addClass("fa-compress").html("close");
                    $(this).parent().parent().css({"width": "100%", "height" : "auto"});

                    $(this).parent().parent().find(".pin-summary").css("display", "none");
                    $(this).parent().parent().find(".pin-content").css("display", "block");
                } else {
                    $(this).addClass("fa-expand");
                    $(this).removeClass("fa-compress").html("expand");
                    $(this).parent().parent().css({"width": "", "height" : ""});

                    $(this).parent().parent().find(".pin-summary").css("display", "block");
                    $(this).parent().parent().find(".pin-content").css("display", "none");
                }
                
            });
        </script>
    </h:body>
</html>
